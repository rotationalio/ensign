<!doctype html><html lang=en-us dir=ltr><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Ensign for Data Scientists # Here&rsquo;s a question we frequently get from our data scientist friends:
What does event-driven data science even look like??
In this tutorial we&rsquo;ll find out! Join along in implementing an event-driven Natural Language Processing tool that does streaming HTML parsing, entity extraction, and sentiment analysis.
Just here for the code? Check it out here!
Prerequisites # To follow along with this tutorial you&rsquo;ll need to:"><meta name=theme-color content="#FFFFFF"><meta name=color-scheme content="light dark"><meta property="og:title" content="Ensign for Data Scientists"><meta property="og:description" content="Ensign for Data Scientists # Here&rsquo;s a question we frequently get from our data scientist friends:
What does event-driven data science even look like??
In this tutorial we&rsquo;ll find out! Join along in implementing an event-driven Natural Language Processing tool that does streaming HTML parsing, entity extraction, and sentiment analysis.
Just here for the code? Check it out here!
Prerequisites # To follow along with this tutorial you&rsquo;ll need to:"><meta property="og:type" content="article"><meta property="og:url" content="https://ensign.rotational.dev/examples/data_scientists/"><meta property="article:section" content="examples"><meta property="article:modified_time" content="2023-03-14T12:18:01-04:00"><title>Ensign for Data Scientists | Ensign Docs</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.57f59bed6677922e9441fc41df4da3dc906a45058f7c8af184aaf40f7b30f971.css integrity="sha256-V/Wb7WZ3ki6UQfxB302j3JBqRQWPfIrxhKr0D3sw+XE=" crossorigin=anonymous><script defer src=/flexsearch.min.js></script>
<script defer src=/en.search.min.369e11d1ea2273835edf416a47a8f0352c8ed75140376b8a0d12278e402555fb.js integrity="sha256-Np4R0eoic4Ne30FqR6jwNSyO11FAN2uKDRInjkAlVfs=" crossorigin=anonymous></script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-XMWR6VW3VJ"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-XMWR6VW3VJ",{anonymize_ip:!1})}</script></head><body dir=ltr><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><div class=book-menu-content><nav><h2 class=book-brand><a class="flex align-center" href=/><img src=/logo.png alt=Logo><span>Ensign Docs</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/getting-started/>Getting Started</a><ul></ul></li><li><a href=/examples/>End-to-End Examples</a><ul><li><a href=/examples/developers/>Ensign for Application Developers</a></li><li><a href=/examples/data_engineers/>Ensign for Data Engineers</a></li><li><a href=/examples/data_scientists/ class=active>Ensign for Data Scientists</a></li></ul></li><li><a href=/eventing/>Eventing 101</a><ul><li><a href=/eventing/glossary/>Glossary</a></li><li><a href=/eventing/faq/>FAQ</a></li></ul></li><li><a href=/sdk/>SDKs</a><ul></ul></li><li><a href=/system/>System</a><ul><li><a href=/system/configuration/>Configuration</a></li><li><a href=/system/staging/>Staging</a></li></ul></li></ul><ul><li><a href=https://github.com/rotationalio/ensign target=_blank rel=noopener>GitHub</a></li><li><a href=https://rotational.io target=_blank rel=noopener>Rotational Labs</a></li></ul></nav><script>(function(){var e=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(){localStorage.setItem("menu.scrollTop",e.scrollTop)}),e.scrollTop=localStorage.getItem("menu.scrollTop")})()</script></div></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Ensign for Data Scientists</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#ensign-for-data-scientists>Ensign for Data Scientists</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#back-to-the-future>Back to the Future</a></li><li><a href=#a-whale-of-a-problem>A Whale of a Problem</a></li><li><a href=#nlp-magic-time>NLP Magic Time</a><ul><li><a href=#parsing-the-beautiful-soup>Parsing the Beautiful Soup</a></li><li><a href=#more-than-a-feeling>More than a Feeling</a></li><li><a href=#finding-the-who-where-and-what>Finding the Who, Where, and What</a></li><li><a href=#whats-next>What&rsquo;s Next?</a></li></ul></li><li><a href=#breaking-free-from-the-batch>Breaking Free from the Batch</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=ensign-for-data-scientists>Ensign for Data Scientists
<a class=anchor href=#ensign-for-data-scientists>#</a></h1><p>Here&rsquo;s a question we frequently get from our data scientist friends:</p><blockquote><p>What does event-driven data science even look like??</p></blockquote><p>In this tutorial we&rsquo;ll find out! Join along in implementing an event-driven Natural Language Processing tool that does streaming HTML parsing, entity extraction, and sentiment analysis.</p><p>Just here for the code? Check it out <a href=https://github.com/rotationalio/ensign-examples/tree/main/go/nlp>here</a>!</p><h2 id=prerequisites>Prerequisites
<a class=anchor href=#prerequisites>#</a></h2><p>To follow along with this tutorial you&rsquo;ll need to:</p><ul><li><a href=https://ensign.rotational.dev/getting-started/#getting-started>Generate an API key to access Ensign</a></li><li><a href=https://go.dev/doc/gopath_code>Set up your GOPATH and workspace</a></li><li><a href=https://ensign.rotational.dev/getting-started/#create-a-client>Create an Ensign client</a></li></ul><h2 id=back-to-the-future>Back to the Future
<a class=anchor href=#back-to-the-future>#</a></h2><p>Did you know? Some of the <a href=https://en.wikipedia.org/wiki/Naive_Bayes_spam_filtering>earliest deployed machine learning apps</a> were event-driven! That’s right — back in the 90’s, email spam filters used Bayesian models to learn on the fly.</p><p>Spam filtering is an awesome example of a natural use case for <a href=https://en.wikipedia.org/wiki/Online_machine_learning>online modeling</a>. Each newly flagged spam message was a new training event, an opportunity to update the model in real time. While most machine learning bootcamps teach us to expect data in batches, there are a TON of natural use cases for streaming data science (maybe even more than for <a href=https://en.wikipedia.org/wiki/Offline_learning>offline aka batchwise modeling</a>!).</p><p>Another great use case for event-driven data science is Natural Language Processing tasks such as named entity recognition, sentiment analysis, and text classification. In this tutorial, we&rsquo;ll tap into a live data feed and see how to process the text content as it streams in.</p><h2 id=a-whale-of-a-problem>A Whale of a Problem
<a class=anchor href=#a-whale-of-a-problem>#</a></h2><p>The data we&rsquo;re going to be working with in this tutorial comes from a live RSS feed ingestion engine called <a href=https://github.com/rotationalio/baleen>Baleen</a>.</p><p><img src=/img/baleen_diagram.png alt=baleen_diagram></p><p>If you want to run your own Baleen, check out <a href=https://github.com/rotationalio/baleen/tree/ensign-demo>this branch</a>. Then install the Baleen CLI:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ go install ./cmd/baleen/
</span></span></code></pre></div><p>Then you can add posts with</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span>$ baleen posts:add https://www.news-source-of-your-choice.com/link-to-article
</span></span></code></pre></div><p>Baleen has an Ensign <code>Publisher</code> that emits new events every time a new article is ingested, and we can write a <code>Subscriber</code> to connect to the Baleen topic feed in order to tap into the feed stream (<em>Note: make sure you <a href=https://ensign.rotational.dev/getting-started/#create-a-client>create an Ensign <code>client</code></a> first!</em>):</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>ensign</span> <span style=color:#e6db74>&#34;github.com/rotationalio/go-ensign&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>func</span> <span style=color:#a6e22e>main</span>() {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>sub</span> <span style=color:#a6e22e>ensign</span>.<span style=color:#a6e22e>Subscriber</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>sub</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>client</span>.<span style=color:#a6e22e>Subscribe</span>(<span style=color:#a6e22e>context</span>.<span style=color:#a6e22e>Background</span>()); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        panic(<span style=color:#e6db74>&#34;failed to create subscriber from client: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>defer</span> <span style=color:#a6e22e>sub</span>.<span style=color:#a6e22e>Close</span>()
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>}
</span></span></code></pre></div><p>Next, you&rsquo;ll want to create a channel to consume events from the stream:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>api</span> <span style=color:#e6db74>&#34;github.com/rotationalio/go-ensign/api/v1beta1&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// still inside main():
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>events</span> <span style=color:#f92672>&lt;-</span><span style=color:#66d9ef>chan</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>Event</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>events</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>sub</span>.<span style=color:#a6e22e>Subscribe</span>(); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        panic(<span style=color:#e6db74>&#34;failed to create subscribe stream: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span></code></pre></div><p>Now we&rsquo;ve got the data feed ready, and the next step is create a loop that will listen on the <code>events</code> channel, and for each event it retrieves, do some NLP magic.</p><h2 id=nlp-magic-time>NLP Magic Time
<a class=anchor href=#nlp-magic-time>#</a></h2><p>Ok, in the last section we set up our Ensign client and connected an Ensign <code>Subscriber</code> to Baleen&rsquo;s Ensign <code>Publisher</code>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>post</span> <span style=color:#e6db74>&#34;github.com/rotationalio/baleen/events&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// still inside main():
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// Events are processed as they show up on the channel
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>event</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>events</span> {
</span></span><span style=display:flex><span>        <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>Type</span>.<span style=color:#a6e22e>Name</span> <span style=color:#f92672>==</span> <span style=color:#e6db74>&#34;Document&#34;</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Unmarshal the event into an HTML Document
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>            <span style=color:#a6e22e>doc</span> <span style=color:#f92672>:=</span> <span style=color:#f92672>&amp;</span><span style=color:#a6e22e>post</span>.<span style=color:#a6e22e>Document</span>{}
</span></span><span style=display:flex><span>            <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>doc</span>.<span style=color:#a6e22e>UnmarshalMsg</span>(<span style=color:#a6e22e>event</span>.<span style=color:#a6e22e>Data</span>); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>                panic(<span style=color:#e6db74>&#34;failed to unmarshal event: &#34;</span> <span style=color:#f92672>+</span> <span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>Error</span>())
</span></span><span style=display:flex><span>            }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>            <span style=color:#75715e>// Do NLP magic here!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>        }
</span></span></code></pre></div><h3 id=parsing-the-beautiful-soup>Parsing the Beautiful Soup
<a class=anchor href=#parsing-the-beautiful-soup>#</a></h3><p>The first step in all real world text processing and modeling projects (well, after ingestion of course ;-D) is parsing. The specific parsing technique has a lot to do with the data; but in this case we&rsquo;re starting with HTML documents, which is what Baleen&rsquo;s <code>Publisher</code> delivers.</p><p>Most data scientists are probably used to using <a href=https://www.crummy.com/software/BeautifulSoup/bs4/doc/>BeautifulSoup</a> for HTML document parsing (just as long as it&rsquo;s <a href=https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454>not regex!</a>). For those doing their data science tasks in Golang, check out <a href=https://github.com/anaskhan96>Anas Khan</a>&rsquo;s <a href=https://github.com/anaskhan96/soup>soup</a> package. Like the original Python package, it has a lot of great utilities for retrieving and preprocessing HTML.</p><p>Since we already have our HTML (which is in the form of bytes), all we need to do to prepare the soup and grab all the paragraphs using the <code>&lt;p></code> tags:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#a6e22e>doc</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>soup</span>.<span style=color:#a6e22e>HTMLParse</span>(string(<span style=color:#a6e22e>html_bytes</span>))
</span></span><span style=display:flex><span><span style=color:#a6e22e>paras</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>doc</span>.<span style=color:#a6e22e>FindAll</span>(<span style=color:#e6db74>&#34;p&#34;</span>)
</span></span></code></pre></div><p>Now we can iterate over <code>paras</code> to process each paragraph chunk by chunk.</p><h3 id=more-than-a-feeling>More than a Feeling
<a class=anchor href=#more-than-a-feeling>#</a></h3><p>Let&rsquo;s say that we want to do streaming sentiment analysis so that we can gauge the sentiment levels of the documents <em>right away</em> rather than in a batch analysis a month from now, when it may be too late to intervene!</p><p>For this we&rsquo;ll leverage the sentiment analysis tools implemented in <a href=https://github.com/cdipaolo>Connor DiPaolo</a>&rsquo;s <a href=https://github.com/cdipaolo/sentiment>Golang Sentiment Library</a>.</p><p>First we load the pre-trained model (trained using a Naive Bayes classifier, if you&rsquo;re curious!) using the <code>Restore</code> function:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;github.com/cdipaolo/sentiment&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>model</span> <span style=color:#a6e22e>sentiment</span>.<span style=color:#a6e22e>Models</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> <span style=color:#a6e22e>model</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>sentiment</span>.<span style=color:#a6e22e>Restore</span>(); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;unable to load pretrained model&#34;</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span></code></pre></div><p>Now, let&rsquo;s iterate over the <code>paras</code> we extracted from the HTML in the section above and score the text of each using the pre-trained sentiment model:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>sentimentScores</span> []<span style=color:#66d9ef>uint8</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>p</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>paras</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// Get the sentiment score for each paragraph
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>        <span style=color:#a6e22e>analysis</span> <span style=color:#f92672>:=</span> <span style=color:#a6e22e>model</span>.<span style=color:#a6e22e>SentimentAnalysis</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>Text</span>(), <span style=color:#a6e22e>sentiment</span>.<span style=color:#a6e22e>English</span>)
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>sentimentScores</span> = append(<span style=color:#a6e22e>sentimentScores</span>, <span style=color:#a6e22e>analysis</span>.<span style=color:#a6e22e>Score</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>        <span style=color:#75715e>// ... more magic coming soon!
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    }
</span></span></code></pre></div><p>We could look at the sentiment of each paragraph, but for tutorial purposes we&rsquo;ll just take an average sentiment for the overall article:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span>    <span style=color:#75715e>// Get the average sentiment score across all the paragraphs
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#66d9ef>var</span> <span style=color:#a6e22e>total</span> <span style=color:#66d9ef>float32</span> = <span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>s</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>sentimentScores</span> {
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>total</span> <span style=color:#f92672>+=</span> float32(<span style=color:#a6e22e>s</span>)
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>avgSentiment</span> = <span style=color:#a6e22e>total</span> <span style=color:#f92672>/</span> float32(len(<span style=color:#a6e22e>sentimentScores</span>))
</span></span><span style=display:flex><span>    }
</span></span></code></pre></div><p>But think of all the other things we can do with all that text!</p><h3 id=finding-the-who-where-and-what>Finding the Who, Where, and What
<a class=anchor href=#finding-the-who-where-and-what>#</a></h3><p>Let&rsquo;s add an entity extraction step to our iteration over the <code>paras</code>. For this we need another dependency, the <a href=https://github.com/jdkato/prose>prose</a> library created by <a href=https://github.com/jdkato>Joseph Kato</a>.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-golang data-lang=golang><span style=display:flex><span><span style=color:#f92672>import</span> (
</span></span><span style=display:flex><span>    <span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>prose</span> <span style=color:#e6db74>&#34;github.com/jdkato/prose/v2&#34;</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#75715e>// allocate empty entity map
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>	<span style=color:#a6e22e>entities</span> = make(<span style=color:#66d9ef>map</span>[<span style=color:#66d9ef>string</span>]<span style=color:#66d9ef>string</span>)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>p</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>paras</span> {
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Get sentiment score
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>		<span style=color:#75715e>// Parse out the entities
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>		<span style=color:#66d9ef>var</span> <span style=color:#a6e22e>parsed</span> <span style=color:#f92672>*</span><span style=color:#a6e22e>prose</span>.<span style=color:#a6e22e>Document</span>
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>if</span> <span style=color:#a6e22e>parsed</span>, <span style=color:#a6e22e>err</span> = <span style=color:#a6e22e>prose</span>.<span style=color:#a6e22e>NewDocument</span>(<span style=color:#a6e22e>p</span>.<span style=color:#a6e22e>Text</span>()); <span style=color:#a6e22e>err</span> <span style=color:#f92672>!=</span> <span style=color:#66d9ef>nil</span> {
</span></span><span style=display:flex><span>			<span style=color:#a6e22e>fmt</span>.<span style=color:#a6e22e>Println</span>(<span style=color:#e6db74>&#34;unable to parse text&#34;</span>)
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>		<span style=color:#66d9ef>for</span> <span style=color:#a6e22e>_</span>, <span style=color:#a6e22e>ent</span> <span style=color:#f92672>:=</span> <span style=color:#66d9ef>range</span> <span style=color:#a6e22e>parsed</span>.<span style=color:#a6e22e>Entities</span>() {
</span></span><span style=display:flex><span>			<span style=color:#75715e>// add entities to map
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>			<span style=color:#a6e22e>entities</span>[<span style=color:#a6e22e>ent</span>.<span style=color:#a6e22e>Text</span>] = <span style=color:#a6e22e>ent</span>.<span style=color:#a6e22e>Label</span>
</span></span><span style=display:flex><span>		}
</span></span><span style=display:flex><span>	}
</span></span></code></pre></div><p>For those familiar with the Python library <a href=https://spacy.io/>spaCy</a>, <code>prose</code> works in a similar fashion. You first create a <code>prose.Document</code> by passing in the text content, which invokes the entity parsing. You can then iterate over the resulting <code>Entities</code>, which consist of tuples of the form <code>(Text, Label)</code>.</p><p>Take for example the sentence:</p><blockquote><p>Robyn Rihanna Fenty, born February 20, 1988, is a Barbadian singer, actress, and businesswoman.</p></blockquote><p>The resulting entities and labels will be:</p><pre tabindex=0><code>{
  &#34;Barbadian&#34;: &#34;GPE&#34;,
  &#34;Robyn Rihanna Fenty&#34;: &#34;PERSON&#34;
}
</code></pre><p>Love you, Riri! Thanks to <code>soup</code>, <code>sentiment</code>, and <code>prose</code> (as well as Ensign and Baleen) we now have:</p><ul><li>a live feed of RSS articles</li><li>a way to parse incoming HTML text into component parts</li><li>a way to score the sentiment of incoming articles</li><li>a way to extract entities from those articles</li></ul><h3 id=whats-next>What&rsquo;s Next?
<a class=anchor href=#whats-next>#</a></h3><p>So many possibilities! We could create a live alerting system that throws a flag every time a specific entity is mentioned. We could configure those alerts to fire only when the sentiment is below some threshold. Reach out to us at <a href=mailto:info@rotational.io>info@rotational.io</a> and let us know what else you&rsquo;d want to make!</p><h2 id=breaking-free-from-the-batch>Breaking Free from the Batch
<a class=anchor href=#breaking-free-from-the-batch>#</a></h2><p>Applied machine learning has come a loooong way in the last ten years. Open source libraries like <a href=https://scikit-learn.org/stable/>scikit-learn</a>, <a href=https://www.tensorflow.org/>TensorFlow</a>, <a href=https://spacy.io/>spaCy</a>, and <a href=https://huggingface.co/>HuggingFace</a> have put ML into the hands of everyday practitioners like us. However, many of us are still struggling to get our models into production.</p><p>And if you know how applied machine learning works, you know delays are bad! As new data naturally &ldquo;drifts&rdquo; away from historic data, the training input of our models becomes less and less relevent to the real world problems we&rsquo;re trying to use prediction to solve. Imagine how much more robust your applications would be if they were not only trained on the freshest data, but could alert you to drifts <em>as soon as they happen</em> &ndash; you&rsquo;d be able to react immediately as opposed to a batchwise process where you&rsquo;d be lucky to catch the issue within a day!</p><p>Event-driven data science is one of the best solutions to the MLOps problem. MLOps often requires us to shoehorn our beautiful models into the existing data flows of our organizations. With a few very special exceptions (we especially love <a href=https://vowpalwabbit.org/>Vowpal Wabbit</a> and <a href=https://huyenchip.com/2022/08/03/stream-processing-for-data-scientists.html>Chip Huyen&rsquo;s introduction to streaming for data scientists</a>), ML tools and training teach us to expect our data in batches, but that&rsquo;s not usually how data flows organically through an app or into a database. If you can figure out how to reconfigure your data science flow to more closely match how data travels in your organization, the pain of MLOps can be reduced to almost nil.</p><p>Happy Eventing!</p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/rotationalio/ensign/commit/d38eda8211c82242b78c7ac4d85f7391890addee title='Last modified by Rebecca Bilbro | Mar 14, 2023' target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Mar 14, 2023</span></a></div><div><a class="flex align-center" href=https://github.com/rotationalio/ensign/edit/main/docs/content/examples/data_scientists.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div><script>(function(){function e(e){const t=window.getSelection(),n=document.createRange();n.selectNodeContents(e),t.removeAllRanges(),t.addRange(n)}document.querySelectorAll("pre code").forEach(t=>{t.addEventListener("click",function(){if(window.getSelection().toString())return;e(t.parentElement),navigator.clipboard&&navigator.clipboard.writeText(t.parentElement.textContent)})})})()</script></footer><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><div class=book-toc-content><nav id=TableOfContents><ul><li><a href=#ensign-for-data-scientists>Ensign for Data Scientists</a><ul><li><a href=#prerequisites>Prerequisites</a></li><li><a href=#back-to-the-future>Back to the Future</a></li><li><a href=#a-whale-of-a-problem>A Whale of a Problem</a></li><li><a href=#nlp-magic-time>NLP Magic Time</a><ul><li><a href=#parsing-the-beautiful-soup>Parsing the Beautiful Soup</a></li><li><a href=#more-than-a-feeling>More than a Feeling</a></li><li><a href=#finding-the-who-where-and-what>Finding the Who, Where, and What</a></li><li><a href=#whats-next>What&rsquo;s Next?</a></li></ul></li><li><a href=#breaking-free-from-the-batch>Breaking Free from the Batch</a></li></ul></li></ul></nav></div></aside></main></body></html>